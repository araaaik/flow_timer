@tailwind base;
@tailwind components;
@tailwind utilities;

/* Smooth theme transitions */
@layer base {
  /* Respect reduced motion */
  @media (prefers-reduced-motion: no-preference) {
    /* Unified timing across the app */
    :root, html, body, #root,
    /* Common containers and surfaces */
    .bg-white, .bg-gray-50, .bg-gray-100, .bg-gray-800, .bg-gray-900,
    /* Text utilities */
    .text-white, .text-gray-900, .text-gray-800, .text-gray-700, .text-gray-600, .text-gray-500, .text-gray-400,
    /* Borders and rings */
    .border, .border-gray-200, .border-gray-600, .ring, .ring-1,
    /* Any element opting into Tailwind color transitions */
    .transition-colors {
      transition-property: background-color, color, border-color, outline-color, fill, stroke, box-shadow;
      transition-duration: 240ms;
      transition-timing-function: cubic-bezier(0.22, 1, 0.36, 1); /* easeOutQuart-like for cohesive feel */
    }

    /* Form controls and buttons share the same timing to avoid phase differences */
    button, input, select, textarea, [role="button"] {
      transition-property: background-color, color, border-color, outline-color, box-shadow, fill, stroke;
      transition-duration: 240ms;
      transition-timing-function: cubic-bezier(0.22, 1, 0.36, 1);
    }
  }
}

/* Smooth size/height/position animations (opt-in) */
@layer utilities {
  .transition-size {
    transition-property: height, max-height, width, max-width, padding, margin;
    transition-duration: 400ms;
    transition-timing-function: cubic-bezier(0.25, 0.46, 0.45, 0.94); /* easeOutQuart */
  }

  /* Enhanced collapse/expand container for vertical slide effects */
  .collapse-container {
    overflow: hidden;
    will-change: max-height, opacity, transform;
    transition-property: max-height, opacity, transform;
    transition-duration: 400ms;
    transition-timing-function: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }
  .collapse-container.collapsed {
    max-height: 0px;
    opacity: 0;
    transform: translateY(-8px);
  }
  .collapse-container.expanded {
    max-height: 1200px; /* large enough for inner content */
    opacity: 1;
    transform: translateY(0);
  }

  /* Smooth modal/panel transitions */
  .transition-modal {
    transition-property: opacity, transform, visibility;
    transition-duration: 400ms;
    transition-timing-function: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  /* Enhanced appear animation for modals/blocks */
  @keyframes fade-in-up {
    from { 
      opacity: 0; 
      transform: translateY(12px) scale(0.98); 
    }
    to { 
      opacity: 1; 
      transform: translateY(0) scale(1); 
    }
  }
  .animate-fade-in-up {
    animation: fade-in-up 400ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  /* Smooth slide animations */
  @keyframes slide-in-up {
    from { 
      opacity: 0; 
      transform: translateY(16px) scale(0.98); 
    }
    to { 
      opacity: 1; 
      transform: translateY(0) scale(1); 
    }
  }
  .animate-slide-in-up {
    animation: slide-in-up 400ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  /* Modal-specific animation that doesn't affect width */
  @keyframes modal-fade-in {
    from { 
      opacity: 0; 
      transform: translateY(12px); 
    }
    to { 
      opacity: 1; 
      transform: translateY(0); 
    }
  }
  .animate-modal-fade-in {
    animation: modal-fade-in 300ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  /* Prevent width animations on modals */
  .fixed.inset-0 {
    transition: none !important;
  }
  .fixed.inset-0 > div {
    transition: none !important;
    width: auto !important;
  }

  /* Stagger animation for multiple elements */
  .animate-stagger-1 { animation-delay: 0ms; }
  .animate-stagger-2 { animation-delay: 50ms; }
  .animate-stagger-3 { animation-delay: 100ms; }
  .animate-stagger-4 { animation-delay: 150ms; }
}